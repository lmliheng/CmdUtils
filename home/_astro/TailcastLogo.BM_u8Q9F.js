import{j as e}from"./jsx-runtime.7faW4zRM.js";import{r as n}from"./index.DhYZZe0J.js";import{u as v,f as $,M as k,a as O,P as T,L as U}from"./motion.DIEilGlj.js";function P(){const r=n.useRef(!1);return v(()=>(r.current=!0,()=>{r.current=!1}),[]),r}function b(){const r=P(),[i,t]=n.useState(0),l=n.useCallback(()=>{r.current&&t(i+1)},[i]);return[n.useCallback(()=>$.postRender(l),[l]),i]}class H extends n.Component{getSnapshotBeforeUpdate(i){const t=this.props.childRef.current;if(t&&i.isPresent&&!this.props.isPresent){const l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function D({children:r,isPresent:i}){const t=n.useId(),l=n.useRef(null),x=n.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=n.useContext(k);return n.useInsertionEffect(()=>{const{width:u,height:c,top:m,left:p}=x.current;if(i||!l.current||!u||!c)return;l.current.dataset.motionPopId=t;const s=document.createElement("style");return d&&(s.nonce=d),document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            top: ${m}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(s)}},[i]),e.jsx(H,{isPresent:i,childRef:l,sizeRef:x,children:n.cloneElement(r,{ref:l})})}const g=({children:r,initial:i,isPresent:t,onExitComplete:l,custom:x,presenceAffectsLayout:d,mode:u})=>{const c=O(S),m=n.useId(),p=n.useMemo(()=>({id:m,initial:i,isPresent:t,custom:x,onExitComplete:s=>{c.set(s,!0);for(const f of c.values())if(!f)return;l&&l()},register:s=>(c.set(s,!1),()=>c.delete(s))}),d?[Math.random()]:[t]);return n.useMemo(()=>{c.forEach((s,f)=>c.set(f,!1))},[t]),n.useEffect(()=>{!t&&!c.size&&l&&l()},[t]),u==="popLayout"&&(r=e.jsx(D,{isPresent:t,children:r})),e.jsx(T.Provider,{value:p,children:r})};function S(){return new Map}function A(r){return n.useEffect(()=>()=>r(),[])}const h=r=>r.key||"";function G(r,i){r.forEach(t=>{const l=h(t);i.set(l,t)})}function V(r){const i=[];return n.Children.forEach(r,t=>{n.isValidElement(t)&&i.push(t)}),i}const J=({children:r,custom:i,initial:t=!0,onExitComplete:l,exitBeforeEnter:x,presenceAffectsLayout:d=!0,mode:u="sync"})=>{const c=n.useContext(U).forceRender||b()[0],m=P(),p=V(r);let s=p;const f=n.useRef(new Map).current,y=n.useRef(s),j=n.useRef(new Map).current,C=n.useRef(!0);if(v(()=>{C.current=!1,G(p,j),y.current=s}),A(()=>{C.current=!0,j.clear(),f.clear()}),C.current)return e.jsx(e.Fragment,{children:s.map(o=>e.jsx(g,{isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:d,mode:u,children:o},h(o)))});s=[...s];const L=y.current.map(h),M=p.map(h),I=L.length;for(let o=0;o<I;o++){const a=L[o];M.indexOf(a)===-1&&!f.has(a)&&f.set(a,void 0)}return u==="wait"&&f.size&&(s=[]),f.forEach((o,a)=>{if(M.indexOf(a)!==-1)return;const R=j.get(a);if(!R)return;const B=L.indexOf(a);let F=o;if(!F){const K=()=>{f.delete(a);const E=Array.from(j.keys()).filter(z=>!M.includes(z));if(E.forEach(z=>j.delete(z)),y.current=p.filter(z=>{const w=h(z);return w===a||E.includes(w)}),!f.size){if(m.current===!1)return;c(),l&&l()}};F=e.jsx(g,{isPresent:!1,onExitComplete:K,custom:i,presenceAffectsLayout:d,mode:u,children:R},h(R)),f.set(a,F)}s.splice(B,0,F)}),s=s.map(o=>{const a=o.key;return f.has(a)?o:e.jsx(g,{isPresent:!0,presenceAffectsLayout:d,mode:u,children:o},h(o))}),e.jsx(e.Fragment,{children:f.size?s:s.map(o=>n.cloneElement(o))})},N=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"58",viewBox:"0 0 256 178",children:e.jsxs("g",{fill:"none",children:[e.jsx("path",{fill:"#FF4081",d:"M153.6 177.98L51.193.605H102.4L204.807 177.98z"}),e.jsx("path",{fill:"#FFF","fill-opacity":".2",d:"m153.6 177.98l25.6-44.344l25.607 44.344z"}),e.jsx("path",{fill:"#FFF","fill-opacity":".1",d:"m128 133.636l25.6 44.344l25.6-44.344z"}),e.jsx("path",{fill:"#000","fill-opacity":".1",d:"m102.4 89.292l25.6 44.344l25.6-44.344z"}),e.jsx("path",{fill:"#000","fill-opacity":".2",d:"M102.4 89.292L128 44.948l25.6 44.344z"}),e.jsx("path",{fill:"#000","fill-opacity":".3",d:"m76.8 44.948l25.6 44.344L128 44.948z"}),e.jsx("path",{fill:"#000","fill-opacity":".4",d:"M76.8 44.948L102.4.605L128 44.948z"}),e.jsx("path",{fill:"#000","fill-opacity":".5",d:"M51.193.605L76.8 44.948L102.4.605z"}),e.jsx("path",{fill:"#536DFE",d:"M51.194 177.98L-.013 89.292L25.593 44.95L102.4 177.98H51.193"}),e.jsx("path",{fill:"#FFF","fill-opacity":".2",d:"M51.194 177.98L76.8 133.636l25.6 44.344z"}),e.jsx("path",{fill:"#FFF","fill-opacity":".1",d:"m25.593 133.636l25.6 44.344L76.8 133.636z"}),e.jsx("path",{d:"m25.593 133.636l25.6-44.344L76.8 133.636z"}),e.jsx("path",{fill:"#000","fill-opacity":".1",d:"m-.013 89.292l25.606 44.344l25.6-44.344z"}),e.jsx("path",{fill:"#000","fill-opacity":".2",d:"M-.013 89.292L25.593 44.95l25.6 44.343z"}),e.jsx("path",{fill:"#303F9F",d:"m51.193 89.292l-25.6-44.344L51.193.605L76.8 44.948z"}),e.jsx("path",{fill:"#000","fill-opacity":".2",d:"M76.8 44.948L51.193.605l-25.6 44.343z"}),e.jsx("path",{fill:"#3F51B5",d:"m204.806 177.98l-25.607-44.344l25.607-44.343l25.6 44.343z"}),e.jsx("path",{fill:"#000","fill-opacity":".2",d:"m230.406 133.636l-25.6 44.344l-25.607-44.344z"}),e.jsx("path",{fill:"#7986CB",d:"M230.407 133.636L153.6.605h51.207l51.207 88.687z"}),e.jsx("path",{fill:"#FFF","fill-opacity":".2",d:"m204.806 89.292l25.6 44.344l25.607-44.344z"}),e.jsx("path",{fill:"#FFF","fill-opacity":".1",d:"m204.806 89.292l25.6-44.344l25.607 44.344z"}),e.jsx("path",{fill:"#000","fill-opacity":".1",d:"M179.2 44.948L204.806.605l25.6 44.343z"}),e.jsx("path",{fill:"#000","fill-opacity":".2",d:"m153.6.605l25.6 44.343L204.808.605z"})]})});export{J as A,N as T};
